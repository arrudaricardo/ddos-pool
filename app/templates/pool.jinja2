{% extends "base.jinja2" %}

{% block content %}

{# POOL INFO #}
<div class="container" style="padding:2em">
  <div class="columns">
    <div class="column col-6 col-sm-11">
      <div class="card">
    <h1>ğŸ“‡ {{pool.name}}</h1>
    <div class='m-1 d-inline'>ğŸ¯ Target:
      <u id='pool-target'>{{pool.target_address}} </u></div>
    <div class='m-1'>ğŸ’¬ Comment:
      <u  id='pool-comment' > {{pool.comment}}
      </u> 
      </div>

    <div class='m-1'>ğŸ‘¨ğŸ»â€ğŸ’» Number of Attackers: 
       <div class="d-inline"  id='numberAttakers'>{{pool.number_attackers}}</div>
    </div>
    
    <div class="p-2">
    <div> Script Run/min: <input  class="col-3" id='speed'  style="border:none" placeholder='min.' value="1" min="1" type="number"></div>
    <button class="my-2 col-4 d-block btn" id='startButton'>Start Attack</button>
    </div>

</div>
</div>
{# CODE #}


  <div class="column col-6 hide-sm col-sm-0 ">
    <pre class="m-0"><strong>Script:</strong>  <code class="JavaScript" id='displayCode' >
    </code></pre> 
  </div>
</div>
</div>


{# MODAL #}
<div id="termsModal" class="modal modal-sm" id="modal-id">
  <div class="modal-container">
    <div class="modal-header">
      <div class="modal-title h5">Agreement</div>
    </div>
    <div class="modal-body">
      <div class="content">
        I agree to not use this code for
      </div>
    </div>
    <div class="modal-footer">
      <button onclick="$('.modal').removeClass('active')" class="btn btn-primary">Agree</button>
    </div>
  </div>
</div>

{% endblock %}

{% block script %}
{% if pool.attack_type == 'Custom Code' %}
<script id='attackCode' type=text/javascript>
{{ pool.custom_code|safe }}
</script>



{% else %}
{% set attackType = pool.attack_type %}
<script id="attackCode"> 
  {% include 'attack_script/'+attackType+'.jinja2'%}
</script>
{% endif %}

{#  General Code for pool page    #}
<script type=text/javascript>
  //display code in DOM
  let customCode = $('#attackCode').text();
  $('#displayCode').text(customCode);

   // highlight Block #displayCode
  hljs.highlightBlock(displayCode)
  </script>

{% endblock %}